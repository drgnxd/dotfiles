# ~/.config/zsh/.zshrc
#
# Index file that loads individual configs
# Actual configuration lives in dot_* files

# Path to Zsh config files
ZDOTDIR="${XDG_CONFIG_HOME:-$HOME/.config}/zsh"

# Ordered list of config files (order matters)
local -a zsh_config_files
zsh_config_files=(
  "$ZDOTDIR/.exports"        # 1. Environment variables (PATH etc.)
  "$ZDOTDIR/.zsh_options"    # 2. Zsh options (history, prompt, etc.)
  "$ZDOTDIR/.aliases"        # 3. Aliases
  "$ZDOTDIR/.functions"      # 4. Functions
  "$ZDOTDIR/.homebrew"       # 5. Homebrew (resolve paths before plugins)
  "$ZDOTDIR/.zsh_completion" # 6. Completion
  "$ZDOTDIR/.zsh_plugins"    # 7. Plugins (may depend on Homebrew paths)
  "$ZDOTDIR/.pyenv"          # 8. pyenv
  "$ZDOTDIR/.zoxide"         # 9. zoxide
  "$ZDOTDIR/.proton"         # 10. Proton Pass
  "$ZDOTDIR/.fzf_theme"      # 11. FZF Solarized Theme
  "$ZDOTDIR/.direnv"         # 12. direnv (load last)
)

# Source each file if it exists
for file in $zsh_config_files; do
  [ -f "$file" ] && . "$file"
done

# Initialize Taskwarrior cache
_task_cache_load

unset zsh_config_files file

# --- Local Settings ---
# Load only if present (git-ignored)
if [ -f "$HOME/.config/zsh/local.zsh" ]; then
    source "$HOME/.config/zsh/local.zsh"
fi
