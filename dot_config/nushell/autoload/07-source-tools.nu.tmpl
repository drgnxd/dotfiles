# Integrations Module - Source Cache Files
# IMPORTANT: This file contains literal paths for 'source' commands
# 
# FIRST TIME SETUP:
#   1. Generate cache files: nu ~/.config/nushell/autoload/06-integrations.nu
#   2. New Nushell sessions will automatically source the caches
#
# NOTE: Cache files are sourced if present; 06-integrations generates them.

# STARSHIP PROMPT
let starship_file = "/Users/drgnxd/.cache/nushell-init/starship.nu"
if ($starship_file | path exists) {
    source /Users/drgnxd/.cache/nushell-init/starship.nu
}

# ZOXIDE
let zoxide_file = "/Users/drgnxd/.cache/nushell-init/zoxide.nu"
if ($zoxide_file | path exists) {
    source /Users/drgnxd/.cache/nushell-init/zoxide.nu
}

# CARAPACE
let carapace_file = "/Users/drgnxd/.cache/nushell-init/carapace.nu"
if ($carapace_file | path exists) {
    source /Users/drgnxd/.cache/nushell-init/carapace.nu
}

# ATUIN
let atuin_file = "/Users/drgnxd/.cache/nushell-init/atuin.nu"
if (not ($atuin_file | path exists)) and (has-cmd atuin) {
    let atuin_init = (do { atuin init nu } | complete)
    if ($atuin_init.exit_code == 0) {
        $atuin_init.stdout | save -f $atuin_file
    }
}
if ($atuin_file | path exists) {
    source /Users/drgnxd/.cache/nushell-init/atuin.nu
}

# Taskwarrior preview (wraps right prompt after prompt tools load)
if (scope commands | where name == "task_preview_enable" | is-not-empty) {
    task_preview_enable
}
