# Infrastructure

git:
  - feat_branches | no_direct_protected | rebase_private_only
  - commit: [1_logical_change, explain_intent, never_secrets]
  - flow: [status+diff>stage, pull>push, resolve_local]

docker:
  - slim_base+pin | multistage | no_secrets | nonroot
  - run: [explicit_env+vols, ro_mounts, healthchecks]

linux:
  - least_priv | reversible | validate_before_after
  - change: [check_state, targeted, backup_cfg]
  - svc: [verify_after_restart, check_logs]

db:
  - schema: [consistent_naming, explicit_pk+idx, doc_rels]
  - query: [idx_frequent, avoid_fullscan, review_plans]
  - migrate: [additive_first, batch_backfill, remove_after_consumers]

security:
  - secrets: [never_hardcode, secret_mgr, rotate_if_exposed]
  - io: [validate+sanitize_all_input, encode_output]
  - deps: [track_3rd_party, update_regular, avoid_unmaintained]
