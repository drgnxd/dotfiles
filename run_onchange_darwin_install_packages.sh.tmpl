#!/bin/sh

# dot_Brewfile hash: {{ include "dot_Brewfile.tmpl" | sha256sum }}

set -e

echo "Checking for Homebrew..."

if command -v brew >/dev/null 2>&1; then
  echo "Homebrew found. Running 'brew bundle' using source Brewfile..."
  
  # Run bundle referencing the managed .Brewfile in the home directory
  if brew bundle --file="$HOME/.Brewfile"; then
    echo "brew bundle completed successfully."
  else
    echo "Error: brew bundle failed." >&2
    exit 1
  fi
else
  echo "Homebrew not found. Skipping brew bundle."
  echo "Please install Homebrew manually or ensure it is in your PATH." >&2
  exit 1
fi
